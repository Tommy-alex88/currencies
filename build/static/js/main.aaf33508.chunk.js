(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{13:function(e,c,t){e.exports={container:"Currencies_container__s5pXZ",info:"Currencies_info__U6s_x",base:"Currencies_base__sLYYY",rates:"Currencies_rates__1g9te",even:"Currencies_even__j9CQ7"}},15:function(e,c,t){e.exports={header:"MainNavigation_header__2lqQ1",logo:"MainNavigation_logo__1TgMx",active:"MainNavigation_active__ydtOF"}},16:function(e,c,t){e.exports={exchange:"Exchange_exchange__jwJ5s",invalid:"Exchange_invalid__6SMR4",result:"Exchange_result__5aWcM",error:"Exchange_error__3deff"}},24:function(e,c,t){e.exports={card:"Card_card__1te4P"}},25:function(e,c,t){e.exports={loader:"Spinner_loader__fTuX5",load1:"Spinner_load1__1BXDX"}},35:function(e,c,t){},41:function(e,c,t){"use strict";t.r(c);var n=t(0),a=t(17),r=t.n(a),s=t(9),i=t(7),o=t(8),u=t(22),l=Object(u.b)({name:"currencies",initialState:{currencies:[],baseCurrency:"RUB",loading:!1},reducers:{update:function(e,c){return Object(o.a)(Object(o.a)({},e),{},{currencies:c.payload})},changeBaseCurrency:function(e,c){return Object(o.a)(Object(o.a)({},e),{},{baseCurrency:c.payload})},updateLoadingStatus:function(e,c){return Object(o.a)(Object(o.a)({},e),{},{loading:c.payload})}}}),j=Object(u.a)({reducer:l.reducer}),d=l.actions,b=j,h=(t(35),t(11)),O=t(2),x=t(15),f=t.n(x),m=t(1),_=function(){return Object(m.jsxs)("header",{className:f.a.header,children:[Object(m.jsx)(s.b,{to:"/",exact:!0,className:f.a.logo,children:"Exchange Rate"}),Object(m.jsx)("nav",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/",exact:!0,activeClassName:f.a.active,children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsx)(s.b,{to:"/currencies",exact:!0,activeClassName:f.a.active,children:"Currencies"})})]})})]})},p=function(e){return Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)(_,{}),Object(m.jsx)("main",{children:e.children})]})},g=t(24),v=t.n(g),C=function(e){return Object(m.jsx)("div",{className:v.a.card,children:e.children})},N=t(16),S=t.n(N),y=function(){var e="Enter valid Pair of Currencies (example: 1.3 USD to RUB)",c=Object(n.useRef)(),t=Object(n.useState)(),a=Object(h.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(""),o=Object(h.a)(i,2),u=o[0],l=o[1],j=Object(n.useState)(!1),d=Object(h.a)(j,2),b=d[0],O=d[1],x=Object(n.useState)(!1),f=Object(h.a)(x,2),_=f[0],p=f[1];return Object(m.jsx)("section",{className:"".concat(S.a.exchange," ").concat((u||!b)&&_&&S.a.invalid),children:Object(m.jsxs)(C,{children:[Object(m.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),l(null),b){var n=c.current.value.toString(),a=n.match(/(\d*\.?,?\d*)/)[0].replace(/,/g,".");a<=0&&l(e);var r=n.match(/([A-Z]{3})/gi),i=r[0],o=r[1],u="https://api.exchangerate.host/convert?from=".concat(i,"&to=").concat(o,"&amount=").concat(a);fetch(u).then((function(e){if(!e.ok)throw new Error("Response error");return e.json()})).then((function(c){c.result?s(c.result):l(e)})).catch((function(e){return l(e.message)}))}else l(e)},children:[Object(m.jsx)("label",{htmlFor:"curr",children:"Enter currencies pair"}),Object(m.jsx)("input",{type:"text",id:"curr",placeholder:"example: 1.2 USD to EUR",ref:c,onChange:function(e){e.target.value.match(/(\d*\.?,?\d*\s[A-Z]{3}\sto\s[A-Z]{3}(?!.))/gi)?(O(!0),l(null)):(O(!1),s(null))},onFocus:function(e){p(!0)},onBlur:function(e){p(!1)}}),Object(m.jsx)("button",{type:"submit",children:"Get Result"})]}),Object(m.jsxs)("div",{className:S.a.result,children:["Result:",u&&Object(m.jsx)("p",{className:S.a.error,children:u}),r&&!u&&Object(m.jsx)("p",{children:r})]})]})})},E=function(){return Object(m.jsx)(y,{})},w=t(25),R=t.n(w),B=function(){return Object(m.jsx)("div",{className:R.a.loader,children:"Loading..."})},M=t(13),U=t.n(M),k=function(){var e=Object(i.b)(),c=Object(i.c)((function(e){return e.currencies})),t=Object(i.c)((function(e){return e.baseCurrency})),n=Object(i.c)((function(e){return e.loading})),a=null,r=0,s=c.map((function(e){return a=r%2===0?Object(m.jsx)("li",{className:U.a.even,children:"".concat(e.name," = ").concat(e.value," ").concat(t)},e.name):Object(m.jsx)("li",{children:"".concat(e.name," = ").concat(e.value," ").concat(t)},e.name),r++,a}));return Object(m.jsx)("section",{className:U.a.container,children:Object(m.jsxs)(C,{children:[Object(m.jsx)("div",{className:U.a.info,children:"Exhange rates for different currency pairs"}),Object(m.jsxs)("div",{className:U.a.base,children:[Object(m.jsx)("p",{children:"Select base currency: "}),Object(m.jsx)("select",{size:"1",value:t,onChange:function(c){e(d.changeBaseCurrency(c.target.value))},children:c.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},e.name)}))})]}),Object(m.jsxs)("div",{className:U.a.rates,children:[n&&Object(m.jsx)(B,{}),!n&&Object(m.jsx)("ul",{children:s})]})]})})};var L=function(){var e=Object(i.b)(),c=Object(i.c)((function(e){return e.baseCurrency})),t=Object(n.useCallback)((function(){e(d.updateLoadingStatus(!0));var t="https://api.exchangerate.host/latest?base=".concat(c);fetch(t).then((function(e){if(!e.ok)throw new Error("Something went wrong!");return e.json()})).then((function(c){for(var t=[],n=0,a=Object.entries(c.rates);n<a.length;n++){var r=Object(h.a)(a[n],2),s=r[0],i=r[1];t.push({name:s,value:i})}e(d.update(t)),e(d.updateLoadingStatus(!1))})).catch((function(e){return console.log(e.message)}))}),[c,e]);return Object(n.useEffect)((function(){t()}),[t]),Object(m.jsx)(p,{children:Object(m.jsxs)(O.c,{children:[Object(m.jsx)(O.a,{path:"/",exact:!0,children:Object(m.jsx)(E,{})}),Object(m.jsx)(O.a,{path:"/currencies",exact:!0,children:Object(m.jsx)(k,{})})]})})};r.a.render(Object(m.jsx)(s.a,{children:Object(m.jsx)(i.a,{store:b,children:Object(m.jsx)(L,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.aaf33508.chunk.js.map